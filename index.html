<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WebApp</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <div class="main">
    <button>Click Here</button>
  </div>
  <script>
    const btn = document.querySelector("button")
    const main = document.querySelector(".main")
    
    const tele = window.Telegram.WebApp;
    
    btn.addEventListener("click", () => {
      tele.ready()
      //tele.sendData("Hello")
      /*fetch('https://ipapi.co/json').then(response => response.json()).then(data => {
    const country = data.country_name;
    tele.sendData(country)
    // You can do further processing or display the country on your website
  }).catch(error => {
    tele.sendData(error)
    console.error('Error:', error);
  });*/

      const datas = tele.initDataUnsafe;
      const tag = document.createElement("div")
      /*tag.innerHTML = JSON.stringify(data);*/
      const URL = "https://api.telegram.org/bot6464751970:AAFfVZYceyuZV3gExwPELbnCwvKZtx1wdJw/answerWebAppQuery";

// Define the payload with the code
const payload = {
    "query_id": datas.query_id,
    "result": {
        "type": "article",
        "id": "1",
        "title": "Result1",
        "input_message_content": {
            "message_text": "hi"
        }
    }
};

// Make the POST request
fetch(URL, {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify(payload)
})
    .then(response => response.json())
    .then(data => {
        // Handle the response data here
        tag.innerHTML = JSON.stringify(data)
      main.appendChild(tag)
    })
    .catch(error => {
        // Handle any errors here
        tag.innerHTML = JSON.stringify(data)
    });
      main.appendChild(tag)
    })
  </script>
</body>

</html>
